/* Merge box owner groups and file lists */

:root {
  --ghco-merge-box-transition: 0.15s ease-in-out;
}

/* Add border to element before standalone section wrapper for merged PRs */
div[class*='MergeBoxSectionHeader-module__wrapper']:has(
    + div > section.ghco-standalone-section
  ) {
  border-bottom: var(--borderWidth-thin, 1px) solid
    var(--borderColor-default, var(--color-border-default));
  padding-bottom: var(--stack-gap-normal, 16px);
}

/* Merge box owner groups container */

/* Override GitHub's 300px max-height limit on the expandable content wrapper when expanded */
.ghco-merge-box-expandable-wrapper.ghco-expanded,
.ghco-merge-box-expandable-wrapper.ghco-expanded > div {
  max-height: none !important;
  overflow: hidden !important;
}

.ghco-merge-box-container {
  display: flex;
  flex-direction: column;
  gap: var(--control-small-gap, 4px);
  max-height: 315px;
  overflow-y: auto;
  padding: var(--base-size-6, 6px) var(--base-size-12, 12px) 0;

  /* Scroll hints: shadows that appear only when there is content to scroll to */
  background:
    /* Top shadow cover (local: moves with content) */ linear-gradient(
      var(--bgColor-muted, var(--color-canvas-subtle)) 30%,
      transparent
    ),
    /* Bottom shadow cover (local: moves with content) */
      linear-gradient(
        transparent,
        var(--bgColor-muted, var(--color-canvas-subtle)) 70%
      )
      0 100%,
    /* Top shadow (scroll: fixed to container) */
      radial-gradient(
        farthest-side at 50% 0,
        rgba(0, 0, 0, 0.2),
        rgba(0, 0, 0, 0)
      ),
    /* Bottom shadow (scroll: fixed to container) */
      radial-gradient(
        farthest-side at 50% 100%,
        rgba(0, 0, 0, 0.2),
        rgba(0, 0, 0, 0)
      )
      0 100%;

  background-repeat: no-repeat;
  /* Ensure the background color matches the container's context so covers work */
  background-color: var(--bgColor-muted, var(--color-canvas-subtle));
  background-size: 100% 40px, 100% 40px, 100% 14px, 100% 14px;
  background-attachment: local, local, scroll, scroll;
}

.ghco-merge-box-owner-group {
  display: grid;
  grid-template-columns: auto 1fr;
  gap: var(--control-small-gap, 4px);
  align-items: center;
  border-bottom: var(--borderWidth-thin, 1px) solid
    var(--borderColor-default, var(--color-border-default));
}

.ghco-merge-box-owner-group:last-child {
  padding-bottom: var(--base-size-4, 4px);
  border-bottom: none;
}

.ghco-merge-box-labels {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: var(--control-small-gap, 4px);
  padding-left: var(--base-size-8, 8px);
  border-left: var(--borderWidth-thin, 1px) solid
    var(--borderColor-default, var(--color-border-default));
}

.ghco-file-count-button {
  display: flex;
  align-items: center;
  align-self: start;
  justify-content: flex-start;
  gap: var(--control-small-gap, 4px);
  padding: var(--control-small-paddingBlock, 4px)
    var(--control-small-paddingInline-condensed, 8px);
  min-width: 90px; /* Accommodate "99 files" with consistent width */
  border: none;
  background: transparent;
  color: var(--fgColor-default, var(--color-fg-default));
  cursor: pointer;
  border-radius: var(--borderRadius-small, 4px);
  font-family: inherit;
  font-size: var(--text-body-size-small, 12px);
}

.ghco-file-count-button:hover {
  background-color: var(
    --control-transparent-bgColor-hover,
    rgba(0, 0, 0, 0.04)
  );
}

.ghco-file-count-button:active {
  background-color: var(
    --control-transparent-bgColor-active,
    rgba(0, 0, 0, 0.08)
  );
}

.ghco-chevron-wrapper {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 12px;
  height: 12px;
  transform: rotate(180deg); /* Default expanded (down) */
  transition: transform var(--ghco-merge-box-transition);
  color: var(--fgColor-muted, var(--color-fg-muted));
}

.ghco-chevron-wrapper svg {
  width: 12px;
  height: 12px;
}

.ghco-file-text {
  font-size: var(--text-body-size-small, 12px);
  color: var(--fgColor-default, var(--color-fg-default));
}

.ghco-files-wrapper {
  grid-column: 1 / -1;
  overflow: hidden;
  max-height: 0;
  opacity: 0;
  transition: opacity var(--ghco-merge-box-transition);
}

.ghco-files-wrapper--expanded {
  max-height: 30000px; /* Room for a little over 1000 files */
  opacity: 1;
}

.ghco-files-content {
  display: flex;
  flex-direction: column;
  gap: var(--base-size-2, 2px);
  margin-left: var(--base-size-24, 24px);
  margin-bottom: var(--base-size-6, 6px);
}

.ghco-merge-box-file-link {
  font-size: var(--text-body-size-small, 12px);
  font-family: var(--fontStack-monospace);
  color: var(--fgColor-accent, var(--color-accent-fg));
  text-decoration: none;
  padding: var(--base-size-2, 2px) var(--base-size-4, 4px);
}

.ghco-merge-box-file-link:hover {
  text-decoration: underline;
}

/* Expandable wrapper - background and rounded corners */
.ghco-merge-box-expandable-wrapper {
  background-color: var(--bgColor-muted, var(--color-canvas-subtle));
  border-bottom-left-radius: var(--borderRadius-medium, 6px);
  border-bottom-right-radius: var(--borderRadius-medium, 6px);
  overflow: hidden; /* Clip children to rounded corners */
}
